# 菠萝觅公共组件库
```bash
  $ npm i @boluome/oto_saas_web_app_component
```

### Demo
```bash
  $ npm run demo
```

### Component


##### 全局遮罩 (Function)
```js
  Mask(Component [, Options])
```
Options :

|参数名|类型|默认值|描述|
|---|---|---|---|
|mask|Boolean|true|是否显示遮罩|
|maskClosable|Boolean|true|是否支持点击遮罩关闭|
|style|Object||遮罩容器样式|
|maskStyle|Object||遮罩样式|

```js
  import { Mask } from '@boluome/oto_saas_web_app_component'

  //普通用法
  Mask(<ChildComponent />)
  //不带遮罩
  Mask(<ChildComponent />, { mask: false })
```

---

##### 全局Loading (Function)
```js
  Loading([Options])
```
Options:

|参数名|类型|默认值|描述|
|---|---|---|---|
|component|React Component||自定义Loading组件|
|mask|Boolean|true|是否显示遮罩|
|maskClosable|Boolean|true|是否支持点击遮罩关闭|
|style|Object||Loading容器样式|
|imgStyle|Object||Loading图样式，不支持自定义|

```js
  const handleClose = Loading()
  //关闭Loading
  handleClose()
```

---

##### 全局SlidePage (Component)
```js
  <SlidePage />
```
Props:

|参数名|类型|默认值|可选参数|描述|
|---|---|---|---|---|
|target|String|right|right, bottom, left, up|滑出层方向|
|type|String|info|info, root|滑出层类型，info为白色，root为灰色|
|showClose|Boolean|true||是否显示关闭按钮，如果不显示则需要子组件实现关闭|
|closeComponent|React Component|||自定义关闭按钮|


```js
  import { Mask, SlidePage } from '@boluome/oto_saas_web_app_component'

  //普通用法
  Mask(<SlidePage target='right'><ChildComponent /></SlidePage>, { mask: false })
  //不显示关闭按钮
  Mask(<SlidePage target='right' showClose={ false } />, { mask: false })
  //自定义关闭按钮
  Mask(<SlidePage target='right' closeComponent={ <Close /> } />, { mask: false })
```

---

##### Promotion (Component)
```js
  <Promotion />
```
Props:

|参数名|类型|描述|
|---|---|---|
|handleChange|Function|当发生优惠变更|
```js
  <PromotionDisplay />
```
Props:

|参数名|类型|描述|
|---|---|---|
|coupon|Object|优惠券对象|
|activity|Object|平台活动对象|

---

##### 收货地址管理 (Component)
```js
  <ContactList />
```
Props:

|参数名|类型|描述|
|---|---|---|
|handleChange|Function|当发生收货地址变更|

```js
  import { Mask, SlidePage, ContactList } from '@boluome/oto_saas_web_app_component'

  Mask(
    <SlidePage target='right' type='root' >
      <ContactList handleChange={ contact => console.log(contact) }/>
    </SlidePage>
    , { mask: false, style: { position: 'absolute' } }
  )
```

---

##### 地址搜索 (Component)
```js
  <AddressSearch />
```
Props:

|参数名|类型|描述|
|---|---|---|
|handleChange|Function|当发生收货地址变更|
|longitude|Int|经度|
|latitude|Int|纬度|

```js
  import { Mask, SlidePage, AddressSearch } from '@boluome/oto_saas_web_app_component'

  Mask(
    <SlidePage target='right' >
      <AddressSearch { ...point } handleChange={ addressResult => console.log(addressResult) }/>
    </SlidePage>
  , { mask: false, style: { position: 'absolute' } })
```
---

##### 城市列表管理（Component）
```js
  <CitySearch />
```

Props:
| 参数名     | 类型      | 描述                                          |
| :--:      | :--:     | :--:                                          |
| localCity | String   | 当前定位的地址                                  |
| callback  | Function | 当选择地址后会执行的回调函数，有一个默认的参数       |
| api       | String／Array | 地址请求的api,或是请求回来的城市列表数据       |
> 注意事项
1. api接口请求回的数据格式或是传入的城市列表数据格式应符合：{name:"上海", py:"shanghai", "id:"021"}, 否则数据无法正确渲染
2. callback函数默认参数：当前选择的对应城市列表中的元素，当定位地址不在城市列表中时，返回参数格式是{ name : "定位城市名" }

```js
import { Mask, SlidePage, CitySearch } from '@boluome/oto_saas_web_app_component'

<p arrow='horizontal' onClick={ () =>
  Mask(
    <SlidePage target='right' showClose={ false } >
      <CitySearch localCity="呵呵" callback = { (result) => { console.log(result) }} api = { 'https://dev-api.otosaas.com/dianying/v1/cities' } />
    </SlidePage>
  , { mask: false, style: { position: 'absolute' } })
} >
  城市列表
</p>
```
